-- Crear la base
CREATE DATABASE MotosDB;
USE MotosDB;

-- Crear tablas 
-- DENTRO DE LA TABLA MODELOS TENDRE ESTAS DOS:
-- Tabla: COLORES
CREATE TABLE MODELO_COLOR (
    id INT AUTO_INCREMENT PRIMARY KEY,
    color VARCHAR(50) NOT NULL
);

-- Tabla: MARCAS
CREATE TABLE MODELO_MARCA (
    id INT AUTO_INCREMENT PRIMARY KEY,
    marca VARCHAR(50) NOT NULL
);

-- Tabla: MODELOS
CREATE TABLE MODELO (
    id INT AUTO_INCREMENT PRIMARY KEY,
    modelo VARCHAR(50) NOT NULL,
    id_marca INT NOT NULL,
    id_color INT NOT NULL,
    FOREIGN KEY (id_marca) REFERENCES MODELO_MARCA(id),
    FOREIGN KEY (id_color) REFERENCES MODELO_COLOR(id)
);


-- Tabla: TIPOS
CREATE TABLE TIPO (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tipo VARCHAR(50) NOT NULL
);

-- Tabla: PROPIETARIOS
CREATE TABLE PROPIETARIO (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    apellido VARCHAR(50) NOT NULL,
    direccion VARCHAR (50),
    correo VARCHAR (50),
    telefono VARCHAR (20)
);

-- Tabla principal: MOTOS
CREATE TABLE MOTO (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_modelo INT NOT NULL,
    id_tipo INT NOT NULL,
    id_propietario INT NOT NULL,
    FOREIGN KEY (id_modelo) REFERENCES MODELO(id),
    FOREIGN KEY (id_tipo) REFERENCES TIPO(id),
    FOREIGN KEY (id_propietario) REFERENCES PROPIETARIO(id)
);

CREATE TABLE SEGURO (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_moto INT NOT NULL,
    compa√±ia VARCHAR(50) NOT NULL,
    poliza VARCHAR(50) NOT NULL,
    fecha_inicio DATE NOT NULL,
    fecha_fin DATE NOT NULL,
    tipo_cobertura VARCHAR(50),
    costo DECIMAL(10, 2),
    FOREIGN KEY (id_moto) REFERENCES MOTO(id)
);

CREATE TABLE VENTA (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_moto INT NOT NULL,
    id_comprador INT NOT NULL,
    fecha_venta DATE NOT NULL,
    precio_venta DECIMAL(10, 2),
    tipo_venta VARCHAR(50) NOT NULL,
    FOREIGN KEY (id_moto) REFERENCES MOTO(id),
    FOREIGN KEY (id_comprador) REFERENCES PROPIETARIO(id)
);
